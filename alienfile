use alienfile;

plugin PkgConfig => 'libzstd';

share {
  start_url 'https://github.com/facebook/zstd/releases/download/v1.5.2';
  plugin Download => (
    filter  => qr/^zstd.*tar\.gz$/,
    version => qr/([0-9\.]+)/,
  );
  plugin Extract => 'tar.gz';
  plugin 'Build::CMake';
  build [
    ['%{cmake}', @{ meta->prop->{plugin_build_cmake}->{args} }, '%{.install.extract}'],
    '%{make}',
    '%{make} install',
  ];
  plugin 'Gather::IsolateDynamic';
}
